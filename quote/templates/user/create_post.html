{% extends "/blog/base.html" %} {% block title %}Quote{% endblock %} {% block banner %}{% endblock %} {% block navbar %}
<nav class="navbar navbar-expand-lg navbar-light bg-dark">
    <div class="container-fluid">
        <a class="navbar-brand text-light" href="{{ url_for('blog.home') }}">Quote</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mx-auto mb-2 mb-lg-0">


                {% for category in categories %} {% for key,value in category.items() %} {% if key == 'parent' %}
                <li class="nav-item dropdown">
                    <a class="nav-link link-light dropdown-toggle text-light" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        {{ value }}
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                        {% for each in category['children'] %}
                        <li><a class="dropdown-item" href="#">{{ each }}</a></li> {% endfor %}
                    </ul>
                </li>
                {% endif %}{% endfor %}{% endfor %}

            </ul>

            <form class="d-flex">
                <input class="search form-control me-2" type="search" placeholder="Search" aria-label="Search">
            </form>


            {% if user %}
            <div class="dropdown">
                <a class="btn  dropdown" href="#" role="button" id="dropdownMenuLink" data-bs-toggle="dropdown" aria-expanded="false">
                    <img class="Avatar " alt="Avatar " src="{{ url_for('static', filename='images/profile_images/' + user.get('profile_image')) }}">
                </a>

                <ul class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    <li>
                        <p class="dropdown-header ">Signed in as <b>{{ user.get('first_name') }}</b></p>
                    </li>
                    <li><a class="dropdown-item " href="{{ url_for( 'user.posts_list') }} ">Dashboard</a></li>
                    <li><a class="dropdown-item " href="{{ url_for( 'api.user_profile', user_id=user.get('user_id')) }} ">Profile</a></li>
                    <li><a class="dropdown-item " href="{{ url_for( 'user.create_post') }}">Write</a></li>
                    <li>
                        <hr class="dropdown-divider ">
                    </li>
                    <li><a class="dropdown-item text-danger " href="{{ url_for( 'blog.logout') }} ">Logout</a></li>
                </ul>
            </div>

            {% else %}

            <div class="butts d-grid gap-2 d-md-block">
                <a href="{{ url_for( 'blog.login') }} ">
                    <button type="submit " class="btn btn-sm btn-outline-secondary signin">Sign in</button>
                </a>

                <a href="{{ url_for( 'blog.register') }} ">
                    <button type="submit " class="btn btn-sm btn-outline-secondary ">Sign up</button>
                </a>
            </div>

            {% endif %}


        </div>

    </div>
</nav>
{% endblock %} {% block css %}
<link rel="stylesheet" href="{{ url_for('static',filename='css/create_post.css') }}"> {% endblock %} {% block content %}

<form method="POST" enctype="multipart/form-data" action="{{ url_for('user.create_post') }}">
    <div class="container">

        <div class="wrapper">
            <div class="title row g-3 align-items-center">
                <div class="col-auto">
                    <label for="inputPassword6" class="col-form-label">Title</label>
                </div>
                <div class="col-auto">
                    <input type="password" id="inputPassword6" class="form-control" aria-describedby="passwordHelpInline">
                </div>
                <div class="col-auto">
                    <span id="passwordHelpInline" class="form-text">
                    Maximum 50 characters long.
                  </span>
                </div>
            </div>


            <textarea name="the-textarea" id="the-textarea" maxlength="5000" placeholder="Start Typing..." autofocus></textarea>
            <div id="the-count">
                <span id="current">0</span>
                <span id="maximum">/ 5000</span>
            </div>

            <select class="form-select" aria-label="Default select example">
                <option selected>Category</option>

                {% for category in categories %} 
                {% for key,value in category.items() %} {% if key == 'parent' %} 
                {% for each in category['children'] %} 
                <option value="1">{{ each }}</option>
                {% endfor %} {% endif %}{% endfor %}{% endfor %}
            </select>

            <div class="upload">
                <label for="formFileLg" class="form-label">Choose image</label>
                <input class="form-control form-control-md" id="formFileLg" type="file">
            </div>

            <div class="butts d-grid gap-2 d-md-block">
                <a href="{{ url_for( 'user.create_post') }} ">
                    <button type="submit " class="btn btn-sm btn-primary">Create</button>
                </a>

                <a class="cancel" href="{{ url_for( 'blog.home') }} ">Cancel</a>
            </div>

        </div>

    </div>
</form>


<script>
    $('textarea').keyup(function() {

        var characterCount = $(this).val().length,
            current = $('#current'),
            maximum = $('#maximum'),
            theCount = $('#the-count');

        current.text(characterCount);

        if (characterCount < 1000) {
            current.css('color', '#666');
        }
        if (characterCount > 1000 && characterCount < 2000) {
            current.css('color', '#6d5555');
        }
        if (characterCount > 2000 && characterCount < 3000) {
            current.css('color', '#793535');
        }
        if (characterCount > 3000 && characterCount < 4000) {
            current.css('color', '#841c1c');
        }
        if (characterCount > 4000 && characterCount < 4499) {
            current.css('color', '#8f0001');
        }

        if (characterCount >= 4500) {
            maximum.css('color', '#8f0001');
            current.css('color', '#8f0001');
            theCount.css('font-weight', 'bold');
        } else {
            maximum.css('color', '#666');
            theCount.css('font-weight', 'normal');
        }
    });
</script>
{% endblock %}